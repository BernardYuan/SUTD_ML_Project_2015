# Chanllenges in part5

##Some improvements are done to the algorihtm

### improvments on emission probability

1. For new words, the emission probability estimator is changed to:
$$e(word, tag) = \frac{count(tag)}{count(tag)+1}$$
the basic thought is to let our algorithm tend to choose more frequent tags when we meet new words. it does help to improve the result.
2. Another observation is that the likelihood of a prediction on the observation is positively correlated to the final correction rate
3. 

without preprocessor
POS,MLE: 0.340717299578
POS,MLE likelihood: 0.44939194816
POS,DP: 0.377285513361
POS,DP likelihood: 0.415421654911
runtime: 150.789947
1 :POS, DP2: 0.352320675105
1 :POS, DP2 likelihood: 0.416385074914
2 :POS, DP2: 0.353375527426
2 :POS, DP2 likelihood: 0.415564350553
3 :POS, DP2: 0.360407876231
3 :POS, DP2 likelihood: 0.415008088844
4 :POS, DP2: 0.357946554149
4 :POS, DP2 likelihood: 0.415136223796
5 :POS, DP2: 0.356891701828
5 :POS, DP2 likelihood: 0.414415829401
6 :POS, DP2: 0.35970464135
6 :POS, DP2 likelihood: 0.414840499776
7 :POS, DP2: 0.365682137834
7 :POS, DP2 likelihood: 0.41471822642
8 :POS, DP2: 0.362869198312
8 :POS, DP2 likelihood: 0.414542654272
9 :POS, DP2: 0.369549929677
9 :POS, DP2 likelihood: 0.415165856021
10 :POS, DP2: 0.364978902954
10 :POS, DP2 likelihood: 0.414790562683
with preprocessor
POS, MLE: 0.322784810127
POS, MLE, likelihood: 0.424347590673
POS, DP: 0.323136427567
POS, DP likelihood: 0.394105149319
runtime: 258.095983
1 :POS, DP2: 0.307665260197
1 :POS, DP2 likelihood: 0.39461488244
2 :POS, DP2: 0.319971870605
2 :POS, DP2 likelihood: 0.394212870339
3 :POS, DP2: 0.3129395218
3 :POS, DP2 likelihood: 0.394413165004
4 :POS, DP2: 0.313291139241
4 :POS, DP2 likelihood: 0.394214251069
5 :POS, DP2: 0.317862165963
5 :POS, DP2 likelihood: 0.393882847751
6 :POS, DP2: 0.323136427567
6 :POS, DP2 likelihood: 0.393784280991
7 :POS, DP2: 0.321729957806
7 :POS, DP2 likelihood: 0.393692079968
8 :POS, DP2: 0.32770745429
8 :POS, DP2 likelihood: 0.39364439757
9 :POS, DP2: 0.321026722925
9 :POS, DP2 likelihood: 0.393877287712
10 :POS, DP2: 0.322081575246
10 :POS, DP2 likelihood: 0.394185371442

without preprocessor
NPC,MLE: 0.242995738508
NPC,MLE likelihood: 0.0923896897338
NPC,DP: 0.191072022244
NPC,DP likelihood: 0.0909450170574
runtime: 12.876365
1 :NPC, DP2: 0.191072022244
1 :NPC, DP2 likelihood: 0.0909450170574
2 :NPC, DP2: 0.204793423399
2 :NPC, DP2 likelihood: 0.0900691186084
3 :NPC, DP2: 0.217215220479
3 :NPC, DP2 likelihood: 0.0896228569642
4 :NPC, DP2: 0.221386042857
4 :NPC, DP2 likelihood: 0.0895067436734
5 :NPC, DP2: 0.235349230816
5 :NPC, DP2 likelihood: 0.0895129850766
6 :NPC, DP2: 0.235107444011
6 :NPC, DP2 likelihood: 0.0894625831752
7 :NPC, DP2: 0.239429383141
7 :NPC, DP2 likelihood: 0.0892757591992
8 :NPC, DP2: 0.241756581135
8 :NPC, DP2 likelihood: 0.0892868121522
9 :NPC, DP2: 0.244688246139
9 :NPC, DP2 likelihood: 0.0893377172325
10 :NPC, DP2: 0.245897180161
10 :NPC, DP2 likelihood: 0.0894427494027

with preprocessor
NPC, MLE: 0.269259830145
NPC, MLE likelihood: 0.0597943008795
NPC, DP: 0.200652824372
NPC, DP likelihood: 0.0586804547369
runtime: 19.830939
1 :NPC, DP2: 0.200652824372
1 :NPC, DP2 likelihood: 0.0586804547369
2 :NPC, DP2: 0.218121920996
2 :NPC, DP2 likelihood: 0.0565764213424
3 :NPC, DP2: 0.226765799257
3 :NPC, DP2 likelihood: 0.0570814859714
4 :NPC, DP2: 0.23610481458
4 :NPC, DP2 likelihood: 0.0557830741207
5 :NPC, DP2: 0.245202043098
5 :NPC, DP2 likelihood: 0.0565601647428
6 :NPC, DP2: 0.250007555838
6 :NPC, DP2 likelihood: 0.0558651991621
7 :NPC, DP2: 0.253755251307
7 :NPC, DP2 likelihood: 0.0561278078517
8 :NPC, DP2: 0.256958926467
8 :NPC, DP2 likelihood: 0.0555262344231
9 :NPC, DP2: 0.257654063529
9 :NPC, DP2 likelihood: 0.0563927489684
10 :NPC, DP2: 0.259135007707
10 :NPC, DP2 likelihood: 0.0558497823595


###improvments on transition probability

use sigmoid funcition to process the transition probability:
$$P(A->B)= \frac{count(A,B)}{count(A)}$$
$$score(A->B) = \frac{1}{1+e^{-P(A->B)}}$$
this helps to eliminate the number of scoreing zero, and makes the transition probability smoother, but the resulit is not strictly better:

without preprocessor
POS,MLE: 0.340717299578
POS,MLE likelihood: 0.44939194816
POS,DP: 0.338607594937
POS,DP likelihood: 0.447725585813
runtime: 164.406103
1 :POS, DP2: 0.338607594937
1 :POS, DP2 likelihood: 0.447725585813
2 :POS, DP2: 0.342827004219
2 :POS, DP2 likelihood: 0.447677061891
3 :POS, DP2: 0.344936708861
3 :POS, DP2 likelihood: 0.447762945438
4 :POS, DP2: 0.346694796062
4 :POS, DP2 likelihood: 0.447722619298
5 :POS, DP2: 0.34423347398
5 :POS, DP2 likelihood: 0.447312928638
6 :POS, DP2: 0.345991561181
6 :POS, DP2 likelihood: 0.447279854964
7 :POS, DP2: 0.349859353024
7 :POS, DP2 likelihood: 0.447446308868
8 :POS, DP2: 0.351617440225
8 :POS, DP2 likelihood: 0.447421767345
9 :POS, DP2: 0.348101265823
9 :POS, DP2 likelihood: 0.447532348044
10 :POS, DP2: 0.344585091421
10 :POS, DP2 likelihood: 0.447574051977
with preprocessor
POS, MLE: 0.322784810127
POS, MLE, likelihood: 0.424347590673
POS, DP: 0.31223628692
POS, DP likelihood: 0.422950833255
runtime: 298.812549
1 :POS, DP2: 0.31223628692
1 :POS, DP2 likelihood: 0.422950833255
2 :POS, DP2: 0.317862165963
2 :POS, DP2 likelihood: 0.422875078737
3 :POS, DP2: 0.319971870605
3 :POS, DP2 likelihood: 0.422931372681
4 :POS, DP2: 0.321729957806
4 :POS, DP2 likelihood: 0.422921521773
5 :POS, DP2: 0.320675105485
5 :POS, DP2 likelihood: 0.42242411522
6 :POS, DP2: 0.322081575246
6 :POS, DP2 likelihood: 0.422365850007
7 :POS, DP2: 0.324894514768
7 :POS, DP2 likelihood: 0.422752414981
8 :POS, DP2: 0.325949367089
8 :POS, DP2 likelihood: 0.422580710667
9 :POS, DP2: 0.323136427567
9 :POS, DP2 likelihood: 0.422527864325
10 :POS, DP2: 0.316807313643
10 :POS, DP2 likelihood: 0.422535571169
without preprocessor
NPC,MLE: 0.242995738508
NPC,MLE likelihood: 0.0923896897338
NPC,DP: 0.229002327198
NPC,DP likelihood: 0.0923823736945
runtime: 15.06673
1 :NPC, DP2: 0.229002327198
1 :NPC, DP2 likelihood: 0.0923823736945
2 :NPC, DP2: 0.260495058482
2 :NPC, DP2 likelihood: 0.0922256657483
3 :NPC, DP2: 0.270680327621
3 :NPC, DP2 likelihood: 0.0920853916788
4 :NPC, DP2: 0.268836703237
4 :NPC, DP2 likelihood: 0.0918950406958
5 :NPC, DP2: 0.277873485055
5 :NPC, DP2 likelihood: 0.0917940096101
6 :NPC, DP2: 0.283132348052
6 :NPC, DP2 likelihood: 0.0917895174067
7 :NPC, DP2: 0.282286094236
7 :NPC, DP2 likelihood: 0.0916623471207
8 :NPC, DP2: 0.285882672953
8 :NPC, DP2 likelihood: 0.0916222498843
9 :NPC, DP2: 0.290174388733
9 :NPC, DP2 likelihood: 0.0915718227112
10 :NPC, DP2: 0.284885302385
10 :NPC, DP2 likelihood: 0.0916242374961
with preprocessor
NPC, MLE: 0.269259830145
NPC, MLE likelihood: 0.0597943008795
NPC, DP: 0.251458276665
NPC, DP likelihood: 0.05978741087
runtime: 22.890641
1 :NPC, DP2: 0.251488500015
1 :NPC, DP2 likelihood: 0.05978741087
2 :NPC, DP2: 0.277964155106
2 :NPC, DP2 likelihood: 0.0595705312647
3 :NPC, DP2: 0.287031160274
3 :NPC, DP2 likelihood: 0.059437769455
4 :NPC, DP2: 0.289630368423
4 :NPC, DP2 likelihood: 0.0592650641459
5 :NPC, DP2: 0.294012754254
5 :NPC, DP2 likelihood: 0.0592097676048
6 :NPC, DP2: 0.300601444676
6 :NPC, DP2 likelihood: 0.0591060975212
7 :NPC, DP2: 0.299241393901
7 :NPC, DP2 likelihood: 0.0590036348591
8 :NPC, DP2: 0.303563333031
8 :NPC, DP2 likelihood: 0.0590047718958
9 :NPC, DP2: 0.306887901593
9 :NPC, DP2 likelihood: 0.0588909195661
10 :NPC, DP2: 0.30564874422
10 :NPC, DP2 likelihood: 0.0588598178468

####improvement on preprocessor
1. replace urls with "URL"
2. replace @xxx with "USR"
3. replace #xxx with "HT"

**result is slightly better than before**

without preprocessor
POS,MLE: 0.340717299578
POS,MLE likelihood: 0.44939194816
POS,DP: 0.377285513361
POS,DP likelihood: 0.415421654911
runtime: 144.617269
1 :POS, DP2: 0.352320675105
1 :POS, DP2 likelihood: 0.416385074914
2 :POS, DP2: 0.353375527426
2 :POS, DP2 likelihood: 0.415564350553
3 :POS, DP2: 0.360407876231
3 :POS, DP2 likelihood: 0.415008088844
4 :POS, DP2: 0.357946554149
4 :POS, DP2 likelihood: 0.415136223796
5 :POS, DP2: 0.356891701828
5 :POS, DP2 likelihood: 0.414415829401
6 :POS, DP2: 0.35970464135
6 :POS, DP2 likelihood: 0.414840499776
7 :POS, DP2: 0.365682137834
7 :POS, DP2 likelihood: 0.41471822642
8 :POS, DP2: 0.362869198312
8 :POS, DP2 likelihood: 0.414542654272
9 :POS, DP2: 0.369549929677
9 :POS, DP2 likelihood: 0.415165856021
10 :POS, DP2: 0.364978902954
10 :POS, DP2 likelihood: 0.414790562683
with preprocessor
POS, MLE: 0.277777777778
POS, MLE, likelihood: 0.424279533704
POS, DP: 0.305907172996
POS, DP likelihood: 0.387947569546
runtime: 329.127807
1 :POS, DP2: 0.290084388186
1 :POS, DP2 likelihood: 0.387931886732
2 :POS, DP2: 0.301687763713
2 :POS, DP2 likelihood: 0.38683100992
3 :POS, DP2: 0.29641350211
3 :POS, DP2 likelihood: 0.386515705425
4 :POS, DP2: 0.302039381153
4 :POS, DP2 likelihood: 0.385802843993
5 :POS, DP2: 0.306962025316
5 :POS, DP2 likelihood: 0.384619723455
6 :POS, DP2: 0.307313642757
6 :POS, DP2 likelihood: 0.385695214481
7 :POS, DP2: 0.31258790436
7 :POS, DP2 likelihood: 0.384555435755
8 :POS, DP2: 0.315752461322
8 :POS, DP2 likelihood: 0.383950964117
9 :POS, DP2: 0.311533052039
9 :POS, DP2 likelihood: 0.384241454461
10 :POS, DP2: 0.315752461322
10 :POS, DP2 likelihood: 0.385302745729
without preprocessor
NPC,MLE: 0.242995738508
NPC,MLE likelihood: 0.0923896897338
NPC,DP: 0.191072022244
NPC,DP likelihood: 0.0909450170574
runtime: 13.140657
1 :NPC, DP2: 0.191072022244
1 :NPC, DP2 likelihood: 0.0909450170574
2 :NPC, DP2: 0.204793423399
2 :NPC, DP2 likelihood: 0.0900691186084
3 :NPC, DP2: 0.217215220479
3 :NPC, DP2 likelihood: 0.0896228569642
4 :NPC, DP2: 0.221386042857
4 :NPC, DP2 likelihood: 0.0895067436734
5 :NPC, DP2: 0.235349230816
5 :NPC, DP2 likelihood: 0.0895129850766
6 :NPC, DP2: 0.235107444011
6 :NPC, DP2 likelihood: 0.0894625831752
7 :NPC, DP2: 0.239429383141
7 :NPC, DP2 likelihood: 0.0892757591992
8 :NPC, DP2: 0.241756581135
8 :NPC, DP2 likelihood: 0.0892868121522
9 :NPC, DP2: 0.244688246139
9 :NPC, DP2 likelihood: 0.0893377172325
10 :NPC, DP2: 0.245897180161
10 :NPC, DP2 likelihood: 0.0894427494027
with preprocessor
NPC, MLE: 0.269501616949
NPC, MLE likelihood: 0.0597641063529
NPC, DP: 0.200683047723
NPC, DP likelihood: 0.0586502517306
runtime: 23.868979
1 :NPC, DP2: 0.200683047723
1 :NPC, DP2 likelihood: 0.0586502517306
2 :NPC, DP2: 0.218152144347
2 :NPC, DP2 likelihood: 0.0565462199841
3 :NPC, DP2: 0.226886692659
3 :NPC, DP2 likelihood: 0.0570512342007
4 :NPC, DP2: 0.23613503793
4 :NPC, DP2 likelihood: 0.0557559266172
5 :NPC, DP2: 0.245232266449
5 :NPC, DP2 likelihood: 0.0565278880252
6 :NPC, DP2: 0.25015867259
6 :NPC, DP2 likelihood: 0.0558351773049
7 :NPC, DP2: 0.253664581255
7 :NPC, DP2 likelihood: 0.0560980900623
8 :NPC, DP2: 0.256868256415
8 :NPC, DP2 likelihood: 0.0554973805067
9 :NPC, DP2: 0.257986520386
9 :NPC, DP2 likelihood: 0.0563648531208
10 :NPC, DP2: 0.259195454408
10 :NPC, DP2 likelihood: 0.0558182012089